{% extends 'base.html' %}

{% block title %}
	Profile-Detail
{% endblock title%}


{% block content %}

	<div class="ui grid">
		<br>
		<div class="row">
			<div class="four wide column">
				<img class="ui medium rounded image" src="{{object.avatar.url}}">
				<h1>{{object.user}}</h1>
				<div class="ui vertical fluid menu">
					<div class="item">
						Posts
						<div class="ui label">
							{{ object.get_posts_count }}
						</div>
					</div>
					<div class="item">
						Likes Given
						<div class="ui label">
							{{ object.get_likes_given_count }}
						</div>
					</div>
					<div class="item">
						Likes Received
						<div class="ui label">
							{{ object.get_likes_received_count }}
						</div>
					</div>
					<div class="item">
						Friends
						<div class="ui label">
							{{ object.get_friends_count }}
						</div>
					</div>
				</div>
				{% if object.user not in rel_receiver and object.user not in rel_sender %}
					<form action="{% url 'profiles:send-invite' %}" method="POST">
						{% csrf_token %}
						<input type="hidden" name="profile_pk" value="{{object.pk}}">
						<button type="submit" class="ui positive basic button mb-5 b-big"><i class="plus squre icon"></i>Add to friends</button>
					</form>
				{% endif %}

				{% if object.user in rel_receiver and request.user not in object.friends.all %}
					<button class="ui disabled button mb-5 b-big"><i class="user icon"></i>Waiting for approval</button>
				{% endif %}

				{% if request.user in object.friends.all %}
					<form action="{% url 'profiles:remove-friend' %}" method="POST">
						{% csrf_token %}
						<input type="hidden" name="profile_pk" value="{{object.pk}}">
						<button type="submit" class="ui negative basic button mb-5 b-big"><i class="minus squre icon"></i>Remove from friends</button>
					</form>
				{% endif %}
			</div>
			<div class="twelve wide column">

				{% if len_posts %}
					{% for post in posts %}
						<div class="segment ui fluid">
							<h3>{{post.content}}</h3> 
							
							<div class="ui fluid image">
		        				{% if post.image %}
		            				<img src={{post.image.url}} style="width: 810px; height: 400px;">
						        {% endif %}

						    </div>
						    <h6 style="margin-top: 5px; margin-bottom: 5px;">{{ post.created|timesince}} ago</h6>
						</div>
					{% endfor %}
				{% else %}
					<h1>No posts of this user...</h1>

				{% endif %}
			</div>
		</div>
	</div>

{% endblock content %}